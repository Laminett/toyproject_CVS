{{>layout/header}}
<div class="content" id="context">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <input type="hidden" id="loginUser" value="{{loginUser}}">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <div style="float: left">
                            <h4 class="card-title">{{#messages}}menu.point.history{{/messages}}</h4>
                            <p class="card-category">Point Management</p>
                        </div>

                        <div style="float: right">
                            <form class="form-inline ml-auto" id="pointHistorySearchForm">
                                <span>{{#messages}}point.history.created.date{{/messages}}</span>
                                <div class="form-group has-white">
                                    <input type="text" class="form-control datepicker" id="search_startDate"
                                           maxlength="10">
                                    <span>-</span>
                                    <input type="text" class="form-control datepicker" id="search_endDate"
                                           maxlength="10">
                                </div>
                                <div class="dropdown" style="margin-right: 10px;">
                                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton-point-history-status" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        {{#messages}}status{{/messages}}
                                    </button>
                                    <div id="point-history-status-field" class="dropdown-menu" aria-labelledby="dropdownMenuButton-point-history-status">
                                        <a class="dropdown-item" search-value="ALL">{{#messages}}ALL{{/messages}}</a>
                                        <a class="dropdown-item" search-value="APPROVE">{{#messages}}APPROVE{{/messages}}</a>
                                        <a class="dropdown-item" search-value="REJECT">{{#messages}}REJECT{{/messages}}</a>
                                        <a class="dropdown-item" search-value="PROCESSING">{{#messages}}PROCESSING{{/messages}}</a>
                                    </div>
                                    <input type="hidden" id="point-history-status" value=""/>
                                </div>
                                <span>{{#messages}}user.full.name{{/messages}}</span>
                                <div class="form-group has-white">
                                    <input type="text" class="form-control" id="search_fullName" maxlength="25" style="color: white;">
                                </div>
                                <button type="button" class="btn btn-white btn-round btn-just-icon" id="btn_search"
                                        name="search">
                                    <i class="material-icons">search</i>
                                </button>
                            </form>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead class="text-center text-primary">
                                    <th>No</th>
                                    <th>{{#messages}}username{{/messages}}</th>
                                    <th>{{#messages}}user.full.name{{/messages}}</th>
                                    <th>{{#messages}}point.history.point{{/messages}}</th>
                                    <th>{{#messages}}point.history.created.date{{/messages}}</th>
                                    <th>{{#messages}}point.history.modified.date{{/messages}}</th>
                                    <th>{{#messages}}status{{/messages}}</th>
                                </thead>
                                <tbody id="pointHistoriesArea"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div>
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center"></ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
<script id="pointHistoriesTemplate" type="text/x-jquery-tmpl">
<tr id='${id}'>
    <td class="text-center">${number}</td>
    <td class="text-left">${username}</td>
    <td class="text-left">${fullName}</td>
    <td class="text-right">${point}</td>
    <td class="text-center">${createdAt}</td>
    <td class="text-center">${modifiedDate}</td>
{%if status == 'PROCESSING'%}
    <td class="td-actions text-center">
        <button type="button" class="btn btn-info" name="btn_approve" value="APPROVE"><i class="material-icons">done</i></button>&nbsp;
        <button type="button" class="btn btn-danger" name="btn_deny" value="REJECT"><i class="material-icons">clear</i></button>
    </td>
{%else%}
    <td class="text-center">${status}</td>
{%/if%}
<tr>
</script>
<script type="text/javascript" src="/js/plugins/jquery.tmpl.js"></script>
<script type="text/javascript" src="/js/point-history.js"></script>
{{>layout/footer}}